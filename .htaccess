# Enable Rewrite Engine
RewriteEngine On

# Serve index.html from frontend/dist/ for root
DirectoryIndex frontend/dist/index.html

# Allow direct access to backend folder
RewriteCond %{REQUEST_URI} ^/backend/ [NC]
RewriteRule ^ - [L]

# Redirect all other requests to frontend/dist/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/backend/
RewriteCond %{REQUEST_URI} !^/frontend/
RewriteRule ^(.*)$ /frontend/dist/$1 [L]

# Prevent directory listing
Options -Indexes
